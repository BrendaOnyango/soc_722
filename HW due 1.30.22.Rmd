---
title: "HW due 1.30.22 Soc 723 Ch. 6 and 7"
author: "Brenda Onyango"
date: "1/23/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Chapter 6 

1) The friend's reasoning does make sense as they have cases showing that height and income seem unrelated or maybe only *associated*, rather than causal. However, their reasoning also doesn't make sense from the perspective that causality doesn't mean that in every case of y (high income) is caused by x (height), but that as x changes (taller heights), then the *distribution* of y (income) changes; theoretically it's possible to know people for which height didn't lead to the $100K+ income. 

### Terry, Coin, and Cake 

2)
a) Variables with a direct effect on money are "CoinFlip" and "TerryInRoom."

b) "Terry'sMood" has an indirect effect on Money. 

### Harry Potter & Reading

3) 
a) The effect of "HarryPotterAsKid" on "ReadingAsAdult" is what we should include to answer the research question. 

b) The indirect effects to include are "ReadOtherRowlingBooks" and a variable not pictured "PeersReading" to capture how the popularity of a book and reading could be about group or network membership. 

c) The alternative explanation between reading Harry Potter and reading more as an adult is the latent variable pictured, which is "LikesReading" that leads to both reading Harry "PotterAsKid" and "ReadingAsAdult." Other antecedent variables are "Parent'sReadingHabit" and "LiteracyEducation." These two are probably more important antecedent variables than "AgePotterReleased" since they affect ability to read and attitude towards reading. I say "AgePotterReleased" is not an important part of the data generating process as other variables because compelling, popular books are read long after their initial publication e.g., *The Lord of the Rings*, another popular fantasy, was initially published in 1954. 

4) 
a) Including variables we're unable to observe on our diagram gives us a fuller picture of the data generating process. "LikesReading" is a latent variable that we can't observe and that can cause both the indepedent and dependent variable. Including latent variables in a diagram can also add to thinking about whether a relationship between two variables is a correlation or is causal. That "HarryPotterAsKid" has to occur before "ReadingAsAdult" can be support for interpreting this diagram as showing a causal relationship. 

b) Latent variables cause both independent and dependent variables. LikesReading could precede and cause both reading Harry Potter as a kid and reading as an adult. 

### Government Fire-Safety

5
a) Draw causal diagram with given features. Referenced: https://ggdag.malco.io/

```{r}
# install.packages("devtools")
devtools::install_github("malcolmbarrett/ggdag") #installing a package made for path diagrams 
```

```{r}
library(ggdag) #loading package and ggplot2 to make diagram 
library(ggplot2)
```

```{r}
firedag <- dagitty::dagitty("dag {
  GoodBudget <- ShortTimeSinceLastFire
  FireSafetyAds <- GoodBudget 
  ParkRangers <- GoodBudget
  DecreaseForestFires <- FireSafetyAds
  DecreaseForestFires <- ParkRangers
  ShortTimeSinceLastFire [exposure]
  DecreaseForestFires [outcome]  
}")

tidy_dag <- tidy_dagitty(firedag)

tidy_dag
```

```{r}
ggdag(tidy_dag) + theme_dag() #visualizing diagram notice the font and nodes are small
```

```{r}
ggdag_adjustment_set(tidy_dag, node_size = 21, text_size = 2.5, text_col = 'black') #adjusting size of nodes and colors for readability 
```

b) One ommitted variable is ParkVisitorBehavior. An increase in ParkRangers could improve ParkVisitorBehavior and that could lead to DecreaseForestFires. 

### Research Question in Sociology

6) A research question in the field of sociology is how does class affect individual health outcomes, namely lifespan, in the U.S.?

a) Data generating process includes the following assumptions:

1. Class is measured by income and class won't change drastically across someone's wokring life. 
2. Class determines access to a health-promoting environment (housing near parks, far from pollution, access to gyms and this leads to health outcomes. 
3. Class determines access to healthcare and this leads to lifespan.
4. Parents' income may lead to both class and individual's lifespan. 
5. Individual risk behaviors lead to individual's lifespan. 

b) The cause of interest or independent variable is class and the outcome (dependent variable) is lifespan. 

c) Other variables at play are occupation (different jobs have different mortality risks), smoking status (which might fall under individual risk behavior), social belonging (is an individual married, has friends, etc.), and net worth. 

d & e) causal diagram with latent variables. 

```{r}
lifedag <- dagitty::dagitty("dag {
  individualincome <- parentsincome
  lifespan <- parentsincome
  lifespan <- healthcareaccess
  livedenvironment <- individualincome
  lifespan <- livedenvironment
  healthcareaccess <- individualincome
  lifespan <- riskbehavior
  indivdiualincome [exposure]
  lifespan [outcome]  
}")

tidy_dag2 <- tidy_dagitty(lifedag)

tidy_dag2


```
```{r}
ggdag_adjustment_set(tidy_dag2, node_size = 21, text_size = 2.5, text_col = 'black') 

```
Risk behavior and parentsincome are latent variables displayed in teh causal diagram above. 

### Effect of Free Shipping 

7) Does "free shipping" cause people to buy items from an online store more? I interpret this question as "does free shipping cause people to increase the frequency of visiting and buying from an online store" instead of "does free shipping cause people to buy more from an online store."

a) Six variables that should be included are:

1. 

b) It is not feasible to collect data on all the variables listed in part a. 

### Defining Causality

8)

9) d. Causal diagram 

## Chapter 7 


